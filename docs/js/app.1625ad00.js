(function(){"use strict";var t={6252:function(t,e,n){var i=n(7195),o=n(5114),r=n.n(o),a=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("TinymceInput",{attrs:{id:t.ids[0],placeholder:t.placeholder,maxlength:t.maxlength,showDetail:t.showDetail,required:t.required,value:t.content[t.ids[0]],autosize:t.autosize},on:{input:t.onInput}}),e("el-divider"),e("TinymceInput",{attrs:{id:t.ids[1],placeholder:t.placeholder,maxlength:t.maxlength,showDetail:t.showDetail,required:t.required,value:t.content[t.ids[1]],autosize:t.autosize},on:{input:t.onInput}}),e("el-divider"),e("TinymceInput",{attrs:{id:t.ids[2],placeholder:t.placeholder,maxlength:t.maxlength,showDetail:t.showDetail,required:t.required,value:t.content[t.ids[2]],autosize:t.autosize},on:{input:t.onInput}}),e("el-divider"),e("el-button",{on:{click:t.onInsert}},[t._v("插入标签")])],1)},s=[],l=n(408),u=function(){var t=this,e=t._self._c;return e("editor",{ref:"zcoInput",attrs:{id:t.id,inline:!0,value:t.parsedValue,init:t.config},on:{onInit:t.handleInit}})},d=[],c=n(1504),h=n.n(c),p=n(9664),f=(n(9426),n(8407),n(2804),n(9491)),m=n(9166);const g='<span class="mceNonEditable el-tag el-tag--info el-tag--light">ZCO_TAG_TEXT1<span class="mce-hide">ZCO_TAG_TEXT2</span>}}</span>',v={height:"36",min_height:36,menubar:!1,plugins:[],toolbar:!1,inline:!0,noneditable_class:"mceNonEditable",skin:!1,content_css:!1,content_style:f.Z.toString()+"\n"+m.Z.toString(),nowrap:!0,force_root_block:""};window.tinymce=h();var x={components:{Editor:p.Z},props:{value:{type:String,default:()=>""},id:{type:String,default:()=>""},required:{type:Boolean,default:()=>!1},minlength:{type:Number,default:()=>1},maxlength:{type:Number,default:()=>140},showDetail:{type:Boolean,default:()=>!1},placeholder:{type:String,default:()=>""},autosize:{type:Object,default:()=>({minRows:1.1,maxRows:3})}},watch:{insert(t){const{id:e,variable:n}=t||{};e===this.$refs.zcoInput.id&&this.insertKeyword(n)}},computed:{...(0,l.rn)({insert:t=>t.variable.insert})},data(){return{editor:null,config:{...v,placeholder:this.placeholder,max_chars:this.maxlength},parsedValue:""}},mounted(){},beforeDestroy(){},methods:{...(0,l.nv)("variable",["setInsertVariable"]),handleInit(t,e){var n=[8,16,17,18,20,33,34,35,36,37,38,39,40,46];this.editor=e,this.$nextTick((()=>{this.parse(this.value)})),e.on("change input",(()=>{this.handleUpdate(e.getContent({format:"text"}))})),e.on("keydown KeyUp Undo Redo",(t=>-1!=n.indexOf(t.keyCode)||(!(e.getContent({format:"text"}).length+1>this.maxlength)||(t.preventDefault(),t.stopPropagation(),!1))))},handleUpdate(t){if(!t)return;const e=this.editor.getContent({format:"text"}).length;this.maxlength&&e<=this.maxlength?this.$emit("input",{value:t,id:this.id}):this.parsedValue=t.substring(0,this.maxlength)},parse(t){if(!t)return;const e=/({{[^{}]+}})|([^{}]+)/g,n=t.match(e),i=n.map((t=>t.startsWith("{{")&&t.endsWith("}}")?{text:t,type:"key"}:{text:t,type:"text"}));i.map((t=>{"key"===t.type?this.insertKeyword(t.text):this.insertText(t.text)}))},insertText(t){if(t&&this.editor){const e=this.editor.getContent({format:"text"}).length;e+t.length>this.maxlength&&(t=t.substring(0,this.maxlength-e)),this.editor.execCommand("mceInsertContent",!1,t)}},insertKeyword(t){if(t&&this.editor){const e=this.editor.getContent({format:"text"}).length;if(e+t.length>this.maxlength)return;let n=this.formatTag(t);this.editor.execCommand("mceInsertContent",!1,n)}},formatTag(t){let e=g,n=t.split("_");const i="_"+n[n.length-1].split("}")[0];n.splice(n.length-1,1);let o=n.join("_");return e=e.replace(/ZCO_TAG_TEXT1/g,o),e=e.replace(/ZCO_TAG_TEXT2/g,i),e}}},_=x,b=n(1001),y=(0,b.Z)(_,u,d,!1,null,null,null),T=y.exports,w={name:"app",components:{TinymceInput:T},data(){return{content:{"textarea-1":"123","textarea-2":"456","textarea-3":"11{{客户_访客_姓名_123}}33{{客户_访客_姓名_123}}33"},autosize:{minRows:1.1,maxRows:3},placeholder:"输入内容",maxlength:20,ids:["textarea-1","textarea-2","textarea-3"],required:!0,showDetail:!1,tag:"{{客户_访客_姓名_123}}"}},mounted(){console.log("mounted",this.content[this.ids[0]])},methods:{...(0,l.nv)("variable",["setInsertVariable"]),onInput({id:t,value:e}){console.log("onInput",e),this.content[t]=e},onInsert(){this.setInsertVariable({variable:this.tag,id:this.ids[0]})}}},I=w,E=(0,b.Z)(I,a,s,!1,null,null,null),O=E.exports;const S={SET_INSERT_VARIABLE:"variable/SET_INSERT_VARIABLE"};var C={namespaced:!0,state:{insert:{id:"",variable:""}},mutations:{[S.SET_INSERT_VARIABLE](t,e){t.insert={...e}}},actions:{setInsertVariable({commit:t},e){t(S.SET_INSERT_VARIABLE,e)}}};i["default"].use(l.ZP);const k=new l.ZP.Store({strict:!0,modules:{variable:C},plugins:[]});window.store=k;var R=k;i["default"].config.productionTip=!1,i["default"].use(r()),new i["default"]({store:R,render:t=>t(O)}).$mount("#app")}},e={};function n(i){var o=e[i];if(void 0!==o)return o.exports;var r=e[i]={id:i,loaded:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}n.m=t,function(){n.amdO={}}(),function(){var t=[];n.O=function(e,i,o,r){if(!i){var a=1/0;for(d=0;d<t.length;d++){i=t[d][0],o=t[d][1],r=t[d][2];for(var s=!0,l=0;l<i.length;l++)(!1&r||a>=r)&&Object.keys(n.O).every((function(t){return n.O[t](i[l])}))?i.splice(l--,1):(s=!1,r<a&&(a=r));if(s){t.splice(d--,1);var u=o();void 0!==u&&(e=u)}}return e}r=r||0;for(var d=t.length;d>0&&t[d-1][2]>r;d--)t[d]=t[d-1];t[d]=[i,o,r]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){n.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,i){var o,r,a=i[0],s=i[1],l=i[2],u=0;if(a.some((function(e){return 0!==t[e]}))){for(o in s)n.o(s,o)&&(n.m[o]=s[o]);if(l)var d=l(n)}for(e&&e(i);u<a.length;u++)r=a[u],n.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return n.O(d)},i=self["webpackChunktinymce_vue_demo"]=self["webpackChunktinymce_vue_demo"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(6252)}));i=n.O(i)})();
//# sourceMappingURL=app.1625ad00.js.map